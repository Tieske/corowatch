<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Coroutine watcher</title>
    <link rel="stylesheet" href="ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>corowatch</h1>


<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><strong>corowatch</strong></li>
</ul>
<h2>Topics</h2>
<ul class="nowrap">
  <li><a href="topics/readme.md.html">readme.md</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>corowatch</code></h1>

<p>Module to watch coroutine executiontime.</p>
<p> Coroutines running too long without
 yielding can be killed to prevent them from locking the Lua state.
 The module uses LuaSocket to get the time (socket.gettime() function). If you
 do not want that, override the coroutine.gettime() method with your own
 implementation.</p>

<p> Version 0.2, <a href="http://www.thijsschreijer.nl">copyright (c) 2013 - Thijs Schreijer</a></p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#coroutine.create">coroutine.create (f)</a></td>
	<td class="summary">This is the same as the regular coroutine.create(), except that when the running
 coroutine is watched, then children spawned will also be watched with the same
 settings.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.gettime">coroutine.gettime ()</a></td>
	<td class="summary">returns current time in seconds.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.resume">coroutine.resume (coro, ...)</a></td>
	<td class="summary">This is the same as the regular coroutine.resume().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.status">coroutine.status (coro)</a></td>
	<td class="summary">This is the same as the regular coroutine.status().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.watch">coroutine.watch (coro, tkilllimit, twarnlimit, cb)</a></td>
	<td class="summary">Protects a coroutine from running too long without yielding.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.wrap">coroutine.wrap (f)</a></td>
	<td class="summary">This is the same as the regular coroutine.wrap(), except that when the running
 coroutine is watched, then children spawned will also be watched with the same
 settings.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.wrapf">coroutine.wrapf (f, tkilllimit, twarnlimit, cb)</a></td>
	<td class="summary">This is the same as the regular coroutine.wrap(), except that the coroutine created
 is watched according to the parameters provided, and not according to the watch
 parameters of the currently running coroutine.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coroutine.yield">coroutine.yield (...)</a></td>
	<td class="summary">This is the same as the regular coroutine.yield().</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#debug.sethook">debug.sethook (coro, ...)</a></td>
	<td class="summary">This is the same as the regular debug.sethook(), except that when trying to set a
 hook on a coroutine that is being watched, if will throw an error.</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "coroutine.create"></a>
    <strong>coroutine.create (f)</strong>
    </dt>
    <dd>
    This is the same as the regular coroutine.create(), except that when the running
 coroutine is watched, then children spawned will also be watched with the same
 settings.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">f</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "coroutine.gettime"></a>
    <strong>coroutine.gettime ()</strong>
    </dt>
    <dd>
    returns current time in seconds.  If not overridden, it will require luasocket and use
 socket.gettime() to get the current time.






</dd>
    <dt>
    <a name = "coroutine.resume"></a>
    <strong>coroutine.resume (coro, ...)</strong>
    </dt>
    <dd>
    This is the same as the regular coroutine.resume().

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">coro</span>



        </li>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "coroutine.status"></a>
    <strong>coroutine.status (coro)</strong>
    </dt>
    <dd>
    This is the same as the regular coroutine.status().

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">coro</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "coroutine.watch"></a>
    <strong>coroutine.watch (coro, tkilllimit, twarnlimit, cb)</strong>
    </dt>
    <dd>
    Protects a coroutine from running too long without yielding.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">coro</span>
         coroutine to be protected
        </li>
        <li><span class="parameter">tkilllimit</span>
         (optional) time in seconds it is allowed to run without yielding
        </li>
        <li><span class="parameter">twarnlimit</span>
         (optional) time in seconds it is allowed before cb is called
 (must be smaller than tkilllimit)
        </li>
        <li><span class="parameter">cb</span>
         (optional) callback executed when the kill or warn limit is reached.
 The callback has 1 parameter (string value being either "warn" or "kill"), but runs
 on the coroutine that is subject of the warning. If the "warn" callback returns a
 truthy value (neither false, nor nil) the coro the timeouts for kill and warn limits
 will be reset (buying more time for the coroutine to finish its business).
 NOTE: the callback runs inside a debughook.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        coro
    </ol>




</dd>
    <dt>
    <a name = "coroutine.wrap"></a>
    <strong>coroutine.wrap (f)</strong>
    </dt>
    <dd>
    This is the same as the regular coroutine.wrap(), except that when the running
 coroutine is watched, then children spawned will also be watched with the same
 settings.  To set sepecific settings for watching use coroutine.wrapf()

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">f</span>



        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="index.html#coroutine.wrapf">coroutine.wrapf</a>
    </ul>


</dd>
    <dt>
    <a name = "coroutine.wrapf"></a>
    <strong>coroutine.wrapf (f, tkilllimit, twarnlimit, cb)</strong>
    </dt>
    <dd>
    This is the same as the regular coroutine.wrap(), except that the coroutine created
 is watched according to the parameters provided, and not according to the watch
 parameters of the currently running coroutine.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">f</span>
         function to wrap
        </li>
        <li><span class="parameter">tkilllimit</span>
         see coroutine.create
        </li>
        <li><span class="parameter">twarnlimit</span>
         see coroutine.create
        </li>
        <li><span class="parameter">cb</span>
         see coroutine.create
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <li><a href="index.html#coroutine.create">coroutine.create</a></li>
         <li><a href="index.html#coroutine.wrap">coroutine.wrap</a></li>
    </ul>


</dd>
    <dt>
    <a name = "coroutine.yield"></a>
    <strong>coroutine.yield (...)</strong>
    </dt>
    <dd>
    This is the same as the regular coroutine.yield().

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "debug.sethook"></a>
    <strong>debug.sethook (coro, ...)</strong>
    </dt>
    <dd>
    This is the same as the regular debug.sethook(), except that when trying to set a
 hook on a coroutine that is being watched, if will throw an error.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">coro</span>



        </li>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.0</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
